# 介绍了系统日志
![[Pasted image 20231205101508.png]]
## 使用系统日志的三部曲
### 打开系统日志
介绍了一个openlog函数来打开系统日志
### 向系统发送日志
介绍了一个syslog的函数，向系统写入日志
### 关闭系统日志
介绍了一个closelog函数，关闭系统日志
### 如何查看日志
`ls /var/log`
`grep file_log /var/log/syslog -n`

---
# 介绍了文件锁
对文件锁
## 给整个文件上锁
介绍了对整个文件上锁的flock函数
	如果两个程序读取同一个文件，那就上共享锁
	如果两个程序中，只有一个程序读取这个文件，就上互斥锁
### 编写了程序来介绍文件锁
上锁后记得解锁
如果两个程序访问同一个文件，那只有等一个程序修改完了文本后，另一个程序才能修改文本
## 给文件的指定区域上锁
### 介绍了fcntl函数
介绍了fcntl的功能
1. 复制文件描述符
2. 
3. 给文件传参数
4. 
介绍了锁的结构体`flock`
### 编写代码来让某个文件区域上锁


---
# 介绍进程间的通信
画图介绍了进程间的通信
## 进程间通信的技术
### 早期进程间通信技术
#### 无名管道
##### 介绍无名管道的原理
画图介绍了什么是无名管道
无名管道是单工的
Linux-UNIX系统编程手册第44.2章
![[Pasted image 20231205144114.png]]
##### 无名管道的特点
![[Pasted image 20231205144142.png]]
##### 无名管道的相关例子
创建一个无名管道
编写了一个程序，子进程读取stdin的值，父进程读取管道的值并打印
然后类比了一下`ls | wc`
然后编写了一个程序，使用子进程使用ls命令将stdout的数据重定向到管道的写端，父进程使用wc命令获取管道的读端
这里老师强调了，如果两个进程同时访问管道的读端与写端，就会有问题
#### 有名管道
##### 介绍有名管道的通信原理
有名管道的工作模式为半双工的，可以双向通信，但是不能同时进行
![[Pasted image 20231205152609.png]]
##### 有名管道的特点
![[Pasted image 20231205152631.png]]
##### 编写有名管道的代码
用代码创建了一个管道文件，向管道里面写入内容，然后另一个程序读取管道里面的内容
用代码打开了一个管道文件，读取管道里面的内容，并打印到屏幕上
使用mkfifo来创建管道文件
介绍了一个access函数，这个函数用来判断文件是否存在的
#### 介绍管道的读写端的特点
![[Pasted image 20231205155423.png]]
##### 读端
如果管道没有数据，读管道的进程会阻塞
如果管道有数据，则读出数据
##### 写端
如果没有读的进程，写进程立刻结束
如果读端有读的进程，如果管道没有满，就可以写数据
如果读端有读的进程，但是管道满了，那写进程就会阻塞
#### 信号
### system V IPC对象
消息队列
共享内存
信号量
### 套接字
