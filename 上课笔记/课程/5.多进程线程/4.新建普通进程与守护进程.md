编写了getpid的示例代码

介绍了什么是进程
介绍了程序的数据段结构
介绍了内存管理单元
介绍了进程的状态：task_struct的相关内容

# 讲了fork函数的原理
![[Pasted image 20231204114449.png]]
编写了fork函数的代码

# 介绍了[exec族](https://www.cnblogs.com/schips/p/12502574.html)的参数与函数名的对应关系
![[Pasted image 20231204115754.png]]


![[Pasted image 20231204140448.png]]

## 参数形式
exec函数族的参数传递有两种方式，
一种是逐个列举的方式，
而另一种则是将所有参数整体构造成指针数组进行传递。
在这里参数传递方式是以函数名的第5位字母来区分的：
> 读者可以观察execl、execle、execlp的语法与execv、execve、execvp的区别。
- 字母为“l”（list）的表示逐个列举的方式，
- 字母为“v”（vertor）的表示将所有参数整体构造成指针数组传递，然后将该数组的首地址当做参数传给它，数组中的最后一个指针要求是NULL。

## exec函数族关系  
前4位统一为：
- exec  
第5位：
- l：参数传递为逐个列举方式，execl、execle、execlp
- v：参数传递为构造指针数组方式，execv、execve、execvp  
第6位：
- e：可传递新进程环境变量， execle、execve
- p：可执行文件查找方式为文件名，execlp、execvp
![[1281523-20200316112445400-1788539408.png]]
l：要传递多个参数
v：要传递数组指针
p：通过环境变量来搜索
e：传递新的环境变量

介绍了environ的使用方法
![[Pasted image 20231204141634.png]]

# 介绍exit的使用
介绍了exit()与_exit()之间的区别
![[Pasted image 20231204151254.png]]
编写代码介绍了这两个函数的区别
![[Pasted image 20231204151422.png]]
在main函数里面，执行return，会调用exit()

# 介绍wait的使用
## 给任意的子进程收尸
wait函数
函数原型：

### 使用方法：
1. 不使用参数的返回值的时候
![[Pasted image 20231204152036.png]]
2. 使用参数的返回值的时候
![[Pasted image 20231204152235.png]]
参数的返回值status返回的是进程结束后return的值

## 给指定的子进程收尸
waitpid函数

## 进程间的收尸
![[Pasted image 20231204153457.png]]
bash是程序进程的父进程，如果程序进程的父进程被bash收尸了，那么就会导致父进程的子进程打印信息到bash上
### 父进程先后结束的效果
![[Pasted image 20231204154013.png]]
![[Pasted image 20231204153603.png]]
### 拓展
当父进程死了，子进程会变成孤儿进程
然后孤儿进程会被系统的1号进程收养
1号进程是祖先进程

# 介绍linux的进程管理方式
linux操作系统下有多个会话，每个会话下面有多个进程组，每个进程组下面有多个进程
![[Pasted image 20231204160454.png]]
编写了代码来演示进程的管理
介绍了getpgid的用法
做了几个代码程序
比如尝试从另一个进程中给另一个进程的子进程收尸，结果不行。

# 介绍守护进程
守护进程是一个进程通过某种方式转变成了守护进程
介绍了守护进程，需要使用setsid来创建
![[Pasted image 20231204170022.png]]
会话1中的进程p1创建了进程p2，然后设置进程p2到新会话中，然后再使用进程p2创建一个子进程p3，这个被创建出来的子进程p3为守护进程。
## 编写了创建守护进程的示例代码
![[Pasted image 20231204170412.png]]
在3后面加上以下代码，会让创建出的守护进程更加安全。
![[Pasted image 20231204171352.png]]
上面的代码会有一些错误的地方。
在The Linux Programming Interface书中，第37.2章介绍了创建一个守护进程的方法

作业：
1、用进程相关API函数编程一个程序，使之产生一个进程扇：父进程产生一系列子进程，每个子进程打印自己的PID然后退出。要求父进程最后打印PID。
![[Pasted image 20231205095043.png]]

2、用进程相关API函数编写一个程序，使之产生一个进程链：父进程派生一个子进程后，然后打印出自己的PID，然后退出，该子进程继续派生子进程，然后打印PID，然后退出，以此类推。
要求：
1实现一个父进程要比子进程先打印PID的版本。（即打印的PID一般是递增的）
2实现一个子进程要比父进程先打印PID的版本。（即打印的PID一般是递减的）
![[Pasted image 20231205095133.png]]
