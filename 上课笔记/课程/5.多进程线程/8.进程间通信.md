# 介绍进程间的通信
画图介绍了进程间的通信
## 进程间通信的技术
### 早期进程间通信技术
#### 无名管道
##### 介绍无名管道的原理
画图介绍了什么是无名管道
无名管道是单工的
Linux-UNIX系统编程手册第44.2章
![[Pasted image 20231205144114.png]]
##### 无名管道的特点
![[Pasted image 20231205144142.png]]
##### 无名管道的相关例子
创建一个无名管道
编写了一个程序，子进程读取stdin的值，父进程读取管道的值并打印
然后类比了一下`ls | wc`
然后编写了一个程序，使用子进程使用ls命令将stdout的数据重定向到管道的写端，父进程使用wc命令获取管道的读端
这里老师强调了，如果两个进程同时访问管道的读端与写端，就会有问题
#### 有名管道
##### 介绍有名管道的通信原理
有名管道的工作模式为半双工的，可以双向通信，但是不能同时进行
![[Pasted image 20231205152609.png]]
##### 有名管道的特点
![[Pasted image 20231205152631.png]]
##### 编写有名管道的代码
用代码创建了一个管道文件，向管道里面写入内容，然后另一个程序读取管道里面的内容
用代码打开了一个管道文件，读取管道里面的内容，并打印到屏幕上
使用mkfifo来创建管道文件
介绍了一个access函数，这个函数用来判断文件是否存在的
#### 介绍管道的读写端的特点
![[Pasted image 20231205155423.png]]
##### 读端
如果管道没有数据，读管道的进程会阻塞
如果管道有数据，则读出数据
##### 写端
如果没有读的进程，写进程立刻结束
如果读端有读的进程，如果管道没有满，就可以写数据
如果读端有读的进程，但是管道满了，那写进程就会阻塞
#### 信号
信号是软件中断
##### 信号的概念
介绍了进程的同步通信和异步通信
介绍了用户进程对信号的响应方式
![[Pasted image 20231205163311.png]]
##### 信号的处理过程
![[Pasted image 20231205163847.png]]
##### 信号的种类
使用`kill -l`查看
##### 常见的信号介绍
##### 信号的API
`kill`函数
`raise`函数
`alarm`（闹钟）函数
`pause`（暂停）函数
编写了一个程序来打印进程与进程组
编写了另一个程序来调用kill函数杀死这个进程与进程组     
##### 信号的处理方式
##### 编写信号的相关例子
###### alram函数的使用案例
alram（闹钟）设定的时间如果到了，那内核将会发出默认的信号来让进程终止
###### pause函数的使用案例
pause函数会使进程挂起，直到收到信号为止

###### 介绍如何设置信号的响应方式
编写了一个程序，这个程序使用signal函数修改信号的默认响应方式为自定义方式
然后编写了另一个程序，使用kill函数发送信号给这个进程

---
介绍了前面的进程间通信的缺陷，从而引出了以下新的进程间通信的方法：
### system V IPC对象
#### 消息队列
##### 消息队列的概念
![[Pasted image 20231206102608.png]]
##### 消息队列的原理
画图介绍了消息队列的原理
![[Pasted image 20231206103322.png]]
两个进程约定了消息的类型
进程发送的消息会交给内核空间的消息队列，然后会发给接收响应消息类型的进程里面
##### 消息队列的操作
![[Pasted image 20231206102652.png]]
###### msgget函数的介绍
编写了msgget函数的使用案例
介绍了IPC对象的查看命令`ipcs`，之查看消息队列`ipc`
当我们有了IPC对象之后，就可以进程进程间的通信了
###### msgsnd函数的介绍
查阅了man手册来查看msgsnd函数的内容
编写了msgsnd的使用方法

###### 
#### 共享内存
#### 信号量
### 套接字
